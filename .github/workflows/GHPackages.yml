name: Publish to GitHub Packages (2)

on:
  workflow_dispatch:

jobs:
  publish:
    runs-on: ubuntu-latest
    
    steps:
      - name: Create sample project
        run: |
          dotnet new classlib -n MyLibrary
          cd MyLibrary
          echo '<Project Sdk="Microsoft.NET.Sdk"><PropertyGroup><TargetFramework>net8.0</TargetFramework><PackageId>MyLibrary</PackageId><Version>1.0.0</Version></PropertyGroup></Project>' > MyLibrary.csproj
      
      - name: Pack
        run: dotnet pack MyLibrary/MyLibrary.csproj --configuration Release --output ./nupkg
      
      - name: Publish to GitHub Packages
        run: dotnet nuget push ./nupkg/*.nupkg --source "https://nuget.pkg.github.com/${{ github.repository_owner }}/index.json" --api-key ${{ secrets.GITHUB_TOKEN }}
